{% extends 'base.html.twig' %}



{% block javascripts %}
    <script src="http://imagesloaded.desandro.com/imagesloaded.pkgd.min.js"></script>
    <script src="{{ asset('bundles/app/js/bootstrap-lightbox.min.js') }}"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/masonry/3.3.0/masonry.pkgd.min.js"></script>
    <script language="javascript">


        $(document).ready(function () {
            $(document).ready(function () {
                $(document).on("click", '.link-video', function (event) {
                    var src = $(this).attr("data-foto");
                    $("#immaginePopup").attr('src', src);

                    $('#modalVideo').modal('show');
                });

            });

            var offset = 3;
            var loading = false;
            $(window).scroll(function () {
                if ($(window).scrollTop() == $(document).height() - $(window).height()) {
                    if (loading == false) {
                        $('div#loadmoreajaxloader').show();
                        loading = true;
                        $.ajax({
                            url: "{{ galleria.permalink }}/json?offset=" + offset,
                            success: function (html) {
                                if (html) {
                                    $('div#loadmoreajaxloader').remove();
                                    $("#postswrapper").append(html);
                                } else {
                                    $('div#loadmoreajaxloader').html('<center>No more posts to show.</center>');
                                }
                                offset += 3;
                                loading = false;
                            }
                        });
                    }

                }
            });


            if (getUrlParameter("foto")) {
                var video = getUrlParameter("foto");

                $("#guarda-" + video).click();

            }


        })
    </script>
{% endblock %}



{% block stylesheets %}
    <style>
        .modal.fade .modal-dialog {
            -webkit-transform: translate(0, -25%);
            -ms-transform: translate(0, -25%);
            transform: translate(0, -25%);
            -webkit-transition: -webkit-transform 0.3s ease-out;
            -moz-transition: -moz-transform 0.3s ease-out;
            -o-transition: -o-transform 0.3s ease-out;
            transition: transform 0.3s ease-out;
        }

        .modal.in .modal-dialog {
            -webkit-transform: translate(0, 0);
            -ms-transform: translate(0, 0);
            transform: translate(0, 0);
        }
    </style>
{% endblock %}

{% block title %}{{ galleria.nome }}
{% endblock %}


{% block body %}



    <div class="row clearfix">
        <div class="col-md-12 column">
                    <div class="category">
            <a href="#" id="back-link" class="back-link"> <span class="glyphicon glyphicon-menu-left bordered" aria-hidden="true"></span>  </a>  <h1>{{ galleria.nome }}</h1>
        </div>
        </div>
    </div>
    <!-- contenuto -->

     <div id="postswrapper">
            <div class="row nodi">
                {% for foto in galleria.foto|slice(0,3) %}
    <div class="col-md-4 column  video-box ">


        <div class="box-home link-video" style="height: 330px;" data-foto="/uploads/galleria_foto/{{ foto.immagine }}">
            <div style="opacity: 1;background-image: url(/uploads/galleria_foto/{{ foto.immagine }});"
                 class="divBackgroundImage">
            </div>
            <div class="content">

                <div class="box-action">
                    <h2>{{ foto.nome }}
                    </h2>

                    <div class="over-box">

                        <button class="btn btn-default dettagli-nodo hvr-glow " type="submit" id="guarda-{{ foto.id }}">
                            GUARDA FOTO
                        </button>
                    </div>

                </div>


            </div>

        </div>


    </div>


{% endfor %}

                    <div id="loadmoreajaxloader" style="display:none;">
                        <center><i class="fa fa-spinner fa-2x fa-spin "></i></center>
                    </div>
            </div>
</div>
            <!-- fine contenuto -->
        </div>


        <div class="row clearfix">
            <div class="col-md-12 column">
                <div class="divisore-big"></div>
            </div>
        </div>


    </div>





        <div id="modalVideo" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                    </div>
                    <div class="modal-body">


                        <div class="embed-responsive embed-responsive-4by3">
                            <img src="" style="width:100%" id="immaginePopup">
                        </div>


                    </div>
                </div>
            </div>
        </div>



{% endblock %}



