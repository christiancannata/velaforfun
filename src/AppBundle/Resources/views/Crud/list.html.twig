{% extends 'base.html.twig' %}

{% block stylesheets %}
    <link rel="stylesheet" href="//cdn.datatables.net/1.10.7/css/jquery.dataTables.min.css">

{% endblock %}


{% block javascripts %}
    <script src="//cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script>
    <script language="javascript">
        $(document).ready(function(){
            $('.crud table').dataTable();
        });
    </script>
{% endblock %}


{% block body %}

    {% set base_path = path(app.request.attributes.get('_route'))|split('/') %}

    {% if base_path|length > 3 %}
        {% set base_path =  '/'~base_path[1]~'/'~base_path[3] %}

    {% else %}
        {% set base_path =  '/'~base_path[1] %}
    {% endif %}
    <div class="row clearfix">
        <div class="col-md-12 column">
            <button type="button" onclick="location.href='{{ base_path }}/crea'"
                    class="btn btn-success">Crea Nuovo
            </button>

        </div>
    </div>


    <div class="row clearfix">
        <div class="col-md-12 column crud">

            <div id="response-div"></div>
            <table class="table table-striped">

                <thead>

                <tr>
                    <th>ID</th>

                    <th>NOME</th>

                    <th>TIMESTAMP</th>

                    <th></th>

                </tr>
                </thead>

                <tbody>
                {% for entity in entities %}
                    <tr data-id="{{ entity.id }}">
                        <td>{{ entity.id }}</td>
                        <td>{{ entity.__toString() }} </td>
                        <td>{{ entity.timestamp|date('d-m-Y H:i') }}</td>
                        <td>
                            <button type="button" onclick="location.href='{{ base_path }}/modifica/{{ entity.id }}'"
                                    class="btn btn-success">Modifica
                            </button>
                            <button type="button" data-route="{{ base_path }}/elimina/{{ entity.id }}"
                                    class="btn btn-danger delete-entity">Elimina
                            </button>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>

            </table>

        </div>
    </div>








{% endblock %}